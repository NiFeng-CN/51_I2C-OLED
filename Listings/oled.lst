C51 COMPILER V9.60.0.0   OLED                                                              12/23/2025 19:08:00 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE OLED
OBJECT MODULE PLACED IN .\Objects\oled.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE oled.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\oled
                    -.lst) OBJECT(.\Objects\oled.obj)

line level    source

   1          #include "oled.h"
   2          
   3          //向oled写入数据
   4          void OLED_SendCommand(unsigned char Command){
   5   1              I2C_Start();
   6   1              I2C_SendByte(0x78);
   7   1              I2C_Recv_Ack();
   8   1              I2C_SendByte(0x00);//Control Byte
   9   1              I2C_Recv_Ack();
  10   1              I2C_SendByte(Command);//Data Byte
  11   1              I2C_Recv_Ack();
  12   1              I2C_Stop();
  13   1      }
  14          
  15          //向oled写入数据
  16          void OLED_SendData(unsigned char Data){
  17   1              I2C_Start();
  18   1              I2C_SendByte(0x78);
  19   1              I2C_Recv_Ack();
  20   1              I2C_SendByte(0x40);//Control Byte
  21   1              I2C_Recv_Ack();
  22   1              I2C_SendByte(Data);//Data Byte
  23   1              I2C_Recv_Ack();
  24   1              I2C_Stop();
  25   1      }
  26          
  27          //初始化OLED显示
  28          void OLED_Init(void){
  29   1              OLED_SendCommand(0xAE);   //display off
  30   1              OLED_SendCommand(0x20); //Set Memory Addressing Mode    
  31   1              OLED_SendCommand(0x10); //00,Horizontal Addressing Mode;01,Vertical Addressing Mode;10,Page Addressing Mo
             -de (RESET);11,Invalid
  32   1              OLED_SendCommand(0xb0); //Set Page Start Address for Page Addressing Mode,0-7
  33   1              OLED_SendCommand(0xc8); //Set COM Output Scan Direction
  34   1              OLED_SendCommand(0x00);//---set low column address
  35   1              OLED_SendCommand(0x10);//---set high column address
  36   1              OLED_SendCommand(0x40);//--set start line address
  37   1              OLED_SendCommand(0x81);//--set contrast control register
  38   1              OLED_SendCommand(0xdf);
  39   1              OLED_SendCommand(0xa1);//--set segment re-map 0 to 127
  40   1              OLED_SendCommand(0xa6);//--set normal display
  41   1              OLED_SendCommand(0xa8);//--set multiplex ratio(1 to 64)
  42   1              OLED_SendCommand(0x3F);//
  43   1              OLED_SendCommand(0xa4);//0xa4,Output follows RAM content;0xa5,Output ignores RAM content
  44   1              OLED_SendCommand(0xd3);//-set display offset
  45   1              OLED_SendCommand(0x00);//-not offset
  46   1              OLED_SendCommand(0xd5);//--set display clock divide ratio/oscillator frequency
  47   1              OLED_SendCommand(0xf0);//--set divide ratio
  48   1              OLED_SendCommand(0xd9);//--set pre-charge period
  49   1              OLED_SendCommand(0x22); //
  50   1              OLED_SendCommand(0xda);//--set com pins hardware configuration
  51   1              OLED_SendCommand(0x12);
  52   1              OLED_SendCommand(0xdb);//--set vcomh
  53   1              OLED_SendCommand(0x20);//0x20,0.77xVcc
C51 COMPILER V9.60.0.0   OLED                                                              12/23/2025 19:08:00 PAGE 2   

  54   1              OLED_SendCommand(0x8d);//--set DC-DC enable
  55   1              OLED_SendCommand(0x14);//
  56   1              OLED_SendCommand(0xaf);//--turn on oled panel 
  57   1      }
  58          
  59          //设置显示位置
  60          void OLED_SetCursor(unsigned char X, unsigned char  Page)
  61          {
  62   1              OLED_SendCommand(0xB0 | Page);                                  //设置页位置
  63   1              OLED_SendCommand(0x10 | ((X & 0xF0) >> 4));     //设置X位置高4位
  64   1              OLED_SendCommand(0x00 | (X & 0x0F));                    //设置X位置低4位
  65   1      }
  66          
  67          //oled清屏
  68          void OLED_Clear(void){
  69   1              unsigned char j,i;
  70   1              for(j = 0; j < 8 ; j++){
  71   2                      OLED_SetCursor(0,j);
  72   2                      for(i = 0;i < 128;i++){
  73   3                              OLED_SendData(0x00);
  74   3                      }
  75   2                      
  76   2              }
  77   1      }
  78          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    283    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
